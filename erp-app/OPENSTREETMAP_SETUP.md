# OpenStreetMap ì§€ë„ ì„¤ì • ê°€ì´ë“œ

## ğŸ“Œ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” **Leaflet + OpenStreetMap**ì„ ì‚¬ìš©í•˜ì—¬ ë¬´ë£Œë¡œ GPS ê¸°ë°˜ ì§€ë„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

### âœ… ì¥ì 
- **ì™„ì „ ë¬´ë£Œ**: API í‚¤ ë°œê¸‰ ë¶ˆí•„ìš”
- **ê°„í¸í•œ ì„¤ì •**: ì¶”ê°€ ì„¤ì • ì—†ì´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥
- **ì˜¤í”ˆì†ŒìŠ¤**: ì „ ì„¸ê³„ ì»¤ë®¤ë‹ˆí‹°ê°€ ê´€ë¦¬í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì§€ë„
- **ë¬´ì œí•œ ì‚¬ìš©**: ì‚¬ìš©ëŸ‰ ì œí•œ ì—†ìŒ
- **ì»¤ìŠ¤í„°ë§ˆì´ì§•**: ë‹¤ì–‘í•œ ìŠ¤íƒ€ì¼ê³¼ ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥

## ğŸš€ ì´ë¯¸ ì ìš© ì™„ë£Œ!

í”„ë¡œì íŠ¸ì—ëŠ” ì´ë¯¸ ë‹¤ìŒì´ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

### 1. Leaflet ë¼ì´ë¸ŒëŸ¬ë¦¬
- `index.html`ì— Leaflet CSS ë° JS íŒŒì¼ í¬í•¨
- ë²„ì „: 1.9.4 (ìµœì‹  ì•ˆì • ë²„ì „)

### 2. GPS ìœ„ì¹˜ ê¸°ëŠ¥
- ë¸Œë¼ìš°ì €ì˜ Geolocation API ì‚¬ìš©
- ìë™ìœ¼ë¡œ í˜„ì¬ ìœ„ì¹˜ ê°ì§€
- ìœ„ì¹˜ ê¶Œí•œ ì˜¤ë¥˜ ì²˜ë¦¬

### 3. ì§€ë„ ê¸°ëŠ¥
- í˜„ì¬ ìœ„ì¹˜ì— íŒŒë€ìƒ‰ ë§ˆì»¤ í‘œì‹œ
- 100m ë°˜ê²½ ì •í™•ë„ í‘œì‹œ (ë°˜íˆ¬ëª… ì›)
- ë§ˆì»¤ í´ë¦­ ì‹œ ì‚¬ìš©ì ì •ë³´ íŒì—…
- ì¤Œ/íŒ¬ ê¸°ëŠ¥
- OpenStreetMap íƒ€ì¼ ì‚¬ìš©

## ğŸ¯ ì‚¬ìš© ë°©ë²•

### 1. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
cd erp-app
npm run dev
```

### 2. ì¼ë°˜ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
- ì•„ì´ë””: `honggd`
- ë¹„ë°€ë²ˆí˜¸: `hong1234`

### 3. ì¶œê·¼í•˜ê¸° í˜ì´ì§€ ì ‘ì†
- ì‚¬ì´ë“œë°”ì—ì„œ **ğŸ¢ ì¶œê·¼í•˜ê¸°** í´ë¦­
- í˜ì´ì§€ í•˜ë‹¨ì— ì§€ë„ê°€ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤

### 4. ìœ„ì¹˜ ê¶Œí•œ í—ˆìš©
- ë¸Œë¼ìš°ì €ì—ì„œ ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ì‹œ **í—ˆìš©** í´ë¦­
- í˜„ì¬ ìœ„ì¹˜ê°€ ì§€ë„ì— í‘œì‹œë©ë‹ˆë‹¤

## ğŸ” êµ¬í˜„ëœ ê¸°ëŠ¥

### GPS ìœ„ì¹˜ ì •ë³´
- âœ… ì‹¤ì‹œê°„ í˜„ì¬ ìœ„ì¹˜ ê°ì§€
- âœ… ìœ„ë„/ê²½ë„ ì¢Œí‘œ í‘œì‹œ
- âœ… ìœ„ì¹˜ ê¶Œí•œ ì˜¤ë¥˜ ì²˜ë¦¬
- âœ… ìœ„ì¹˜ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ìœ„ì¹˜(ì„œìš¸ì‹œì²­) í‘œì‹œ

### ì§€ë„ í‘œì‹œ
- âœ… OpenStreetMap íƒ€ì¼ ë ˆì´ì–´
- âœ… íŒŒë€ìƒ‰ ì›í˜• ë§ˆì»¤ (í˜„ì¬ ìœ„ì¹˜)
- âœ… 100m ë°˜ê²½ ì •í™•ë„ ì›
- âœ… í´ë¦­ ì‹œ ì •ë³´ íŒì—…
- âœ… ì¤Œ ì¸/ì•„ì›ƒ ì»¨íŠ¸ë¡¤
- âœ… ë“œë˜ê·¸ë¡œ ì§€ë„ ì´ë™

### UI/UX
- âœ… ë°˜ì‘í˜• ë””ìì¸
- âœ… ë¡œë”© ìƒíƒœ í‘œì‹œ
- âœ… ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- âœ… ê¹”ë”í•œ ì¹´ë“œ ë ˆì´ì•„ì›ƒ

## ğŸŒ ì§€ì› ë¸Œë¼ìš°ì €

### Geolocation API ì§€ì›
- âœ… Chrome 5+
- âœ… Firefox 3.5+
- âœ… Safari 5+
- âœ… Edge (ëª¨ë“  ë²„ì „)
- âœ… Opera 10.6+
- âœ… ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € (iOS Safari, Android Chrome)

### HTTPS ìš”êµ¬ì‚¬í•­
- **ë¡œì»¬ ê°œë°œ** (localhost): HTTP ê°€ëŠ¥
- **í”„ë¡œë•ì…˜**: HTTPS í•„ìˆ˜ (ìœ„ì¹˜ ì •ë³´ ë³´ì•ˆ)

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### ì§€ë„ê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²½ìš°

#### 1. ì½˜ì†” ì—ëŸ¬ í™•ì¸
ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12) â†’ Console íƒ­ì—ì„œ ì—ëŸ¬ í™•ì¸

#### 2. Leaflet ë¡œë“œ í™•ì¸
Console íƒ­ì—ì„œ ì…ë ¥:
```javascript
console.log(window.L);
```
`undefined`ê°€ ì•„ë‹ˆì–´ì•¼ í•©ë‹ˆë‹¤.

#### 3. ì§€ë„ ì»¨í…Œì´ë„ˆ ë†’ì´ í™•ì¸
ì§€ë„ ì»¨í…Œì´ë„ˆì— ëª…ì‹œì  ë†’ì´ê°€ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
```css
height: 320px; /* ì´ë¯¸ ì ìš©ë¨ */
```

### ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ëŠ” ê²½ìš°

#### 1. ë¸Œë¼ìš°ì € ê¶Œí•œ í™•ì¸
- Chrome: ì„¤ì • â†’ ê°œì¸ì •ë³´ ë° ë³´ì•ˆ â†’ ì‚¬ì´íŠ¸ ì„¤ì • â†’ ìœ„ì¹˜
- Firefox: ì£¼ì†Œì°½ ì™¼ìª½ ìë¬¼ì‡  ì•„ì´ì½˜ â†’ ê¶Œí•œ â†’ ìœ„ì¹˜

#### 2. GPS/Wi-Fi í™•ì¸
- ê¸°ê¸°ì˜ ìœ„ì¹˜ ì„œë¹„ìŠ¤ê°€ ì¼œì ¸ ìˆëŠ”ì§€ í™•ì¸
- Wi-Fië¥¼ ì¼œë©´ ìœ„ì¹˜ ì •í™•ë„ê°€ í–¥ìƒë©ë‹ˆë‹¤

#### 3. HTTPS í™•ì¸ (í”„ë¡œë•ì…˜)
- ì‹¤ì œ ì„œë²„ ë°°í¬ ì‹œ HTTPS ì‚¬ìš© í•„ìˆ˜
- Let's Encryptë¡œ ë¬´ë£Œ SSL ì¸ì¦ì„œ ë°œê¸‰ ê°€ëŠ¥

### ì§€ë„ê°€ ëŠë¦° ê²½ìš°

#### íƒ€ì¼ ì„œë²„ ë³€ê²½
ë‹¤ë¥¸ OpenStreetMap íƒ€ì¼ ì„œë²„ ì‚¬ìš©:

```javascript
// ê¸°ë³¸ (í˜„ì¬ ì‚¬ìš© ì¤‘)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {...})

// ëŒ€ì•ˆ 1: OpenStreetMap France
L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {...})

// ëŒ€ì•ˆ 2: CartoDB Voyager
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {...})
```

## ğŸ¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ë§ˆì»¤ ìƒ‰ìƒ ë³€ê²½
```javascript
const marker = L.circleMarker([lat, lng], {
  color: '#ffffff',        // í…Œë‘ë¦¬ ìƒ‰ìƒ
  fillColor: '#ff0000',    // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½
  fillOpacity: 1,
  weight: 3,
  radius: 10
});
```

### ì •í™•ë„ ë°˜ê²½ ë³€ê²½
```javascript
L.circle([lat, lng], {
  radius: 200  // 100m â†’ 200më¡œ ë³€ê²½
});
```

### ì¤Œ ë ˆë²¨ ë³€ê²½
```javascript
const map = L.map(mapRef.current).setView([lat, lng], 17);
// 17 â†’ 15 (ë” ë„“ì€ ë²”ìœ„), 19 (ë” ì¢ì€ ë²”ìœ„)
```

### ë‹¤ë¥¸ ì§€ë„ ìŠ¤íƒ€ì¼ ì ìš©
```javascript
// ìœ„ì„± ì´ë¯¸ì§€ (Esri)
L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {...})

// ì–´ë‘ìš´ í…Œë§ˆ
L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {...})

// ë°ì€ í…Œë§ˆ
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {...})
```

## ğŸš€ í–¥í›„ ì¶”ê°€ ê°€ëŠ¥í•œ ê¸°ëŠ¥

### 1. ì¶œê·¼ ì‹œ ìœ„ì¹˜ ì •ë³´ ì €ì¥
```javascript
const handleClockIn = () => {
  const attendance = {
    clockInTime: timeString,
    location: {
      lat: userLocation.lat,
      lng: userLocation.lng
    }
  };
  localStorage.setItem(storageKey, JSON.stringify(attendance));
};
```

### 2. íšŒì‚¬ ìœ„ì¹˜ì™€ì˜ ê±°ë¦¬ ê³„ì‚°
```javascript
const companyLocation = { lat: 37.5666805, lng: 126.9784147 };
const distance = map.distance(
  [userLocation.lat, userLocation.lng],
  [companyLocation.lat, companyLocation.lng]
);
// distanceëŠ” ë¯¸í„° ë‹¨ìœ„
```

### 3. ì§€ì˜¤íœì‹± (Geofencing)
```javascript
const isWithinRange = distance <= 500; // 500m ì´ë‚´
if (!isWithinRange) {
  alert('íšŒì‚¬ ê·¼ì²˜ì—ì„œë§Œ ì¶œê·¼ ì²´í¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
}
```

### 4. ê²½ë¡œ í‘œì‹œ
```javascript
const polyline = L.polyline([
  [lat1, lng1],
  [lat2, lng2]
], {color: 'blue'}).addTo(map);
```

### 5. ì—¬ëŸ¬ ë§ˆì»¤ í‘œì‹œ
```javascript
const markers = [
  { lat: 37.566, lng: 126.978, title: 'ë³¸ì‚¬' },
  { lat: 37.567, lng: 126.979, title: 'ì§€ì ' }
];

markers.forEach(loc => {
  L.marker([loc.lat, loc.lng])
    .bindPopup(loc.title)
    .addTo(map);
});
```

## ğŸ“š ì°¸ê³  ìë£Œ

- [Leaflet ê³µì‹ ë¬¸ì„œ](https://leafletjs.com/)
- [OpenStreetMap ìœ„í‚¤](https://wiki.openstreetmap.org/)
- [Leaflet íŠœí† ë¦¬ì–¼](https://leafletjs.com/examples.html)
- [Geolocation API](https://developer.mozilla.org/ko/docs/Web/API/Geolocation_API)
- [ë¬´ë£Œ íƒ€ì¼ ì„œë²„ ëª©ë¡](https://wiki.openstreetmap.org/wiki/Tile_servers)

## ğŸ’¡ íŒ

### ì„±ëŠ¥ ìµœì í™”
- ì§€ë„ëŠ” ì²˜ìŒ ë¡œë“œ ì‹œì—ë§Œ ì´ˆê¸°í™”
- `useEffect` cleanup í•¨ìˆ˜ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬
- ë¶ˆí•„ìš”í•œ ë§ˆì»¤ëŠ” ì œê±°

### ëª¨ë°”ì¼ ìµœì í™”
- í„°ì¹˜ ì œìŠ¤ì²˜ ì§€ì› (ê¸°ë³¸ ì œê³µ)
- ë°˜ì‘í˜• ì§€ë„ í¬ê¸°
- GPS ìë™ í™œì„±í™”

### ë³´ì•ˆ
- HTTPS ì‚¬ìš© (í”„ë¡œë•ì…˜)
- ìœ„ì¹˜ ë°ì´í„° ì•”í˜¸í™”
- ì‚¬ìš©ì ë™ì˜ í•„ìˆ˜

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Leaflet ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
- [x] OpenStreetMap íƒ€ì¼ ë ˆì´ì–´ ì„¤ì •
- [x] GPS ìœ„ì¹˜ ê°ì§€ êµ¬í˜„
- [x] í˜„ì¬ ìœ„ì¹˜ ë§ˆì»¤ í‘œì‹œ
- [x] ì •í™•ë„ ì› í‘œì‹œ
- [x] íŒì—… ì •ë³´ ì°½ êµ¬í˜„
- [x] ì—ëŸ¬ ì²˜ë¦¬ êµ¬í˜„
- [x] UI/UX ë””ìì¸ ì™„ë£Œ
- [x] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì ìš©
- [x] ë¬¸ì„œí™” ì™„ë£Œ

ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤! ğŸ‰

